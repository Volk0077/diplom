{% extends 'base.html' %}
{% load static %}

{% block title %}{{ service.name }} - –°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/services.css' %}">
<link rel="stylesheet" href="{% static 'css/bookings.css' %}">
{% endblock %}

{% block content %}
<div class="service-detail">
    <div class="service-info">
        <h1>{{ service.name }}</h1>
        <div class="service-meta">
            <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ service.category.name }}</p>
            <p><strong>–¶–µ–Ω–∞:</strong> {{ service.price }} —Ä—É–±.</p>
            <p><strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> {{ service.duration_minutes }} –º–∏–Ω</p>
        </div>
        <p class="service-description">{{ service.description }}</p>
    </div>

    {% if user.is_authenticated and user.role == 'client' %}
    <div class="booking-section">
        <h2>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —ç—Ç—É —É—Å–ª—É–≥—É</h2>

        {% if booking_form.non_field_errors %}
            <div class="errors">
                {{ booking_form.non_field_errors }}
            </div>
        {% endif %} 

        <form method="post">
            {% csrf_token %}

            <div class="form-section">
                <h3>üë®‚Äçüíº –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞</h3>
                <div class="form-group">
                    {{ booking_form.staff }}
                    {% if booking_form.staff.errors %}
                        <div class="errors">{{ booking_form.staff.errors }}</div>
                    {% endif %}
                </div>
            </div>

            <div class="form-section">
                <h3>üìÖ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</h3>
                <div class="form-group">
                    {{ booking_form.appointment_date }}
                    {% if booking_form.appointment_date.errors %}
                        <div class="errors">{{ booking_form.appointment_date.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ booking_form.appointment_time }}
                    {% if booking_form.appointment_time.errors %}
                        <div class="errors">{{ booking_form.appointment_time.errors }}</div>
                    {% endif %}
                </div>
            </div>

            <button type="submit" class="btn btn-modern">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
        </form>
    </div>
    {% elif not user.is_authenticated %}
        <div class="auth-required">
            <p>–ß—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —É—Å–ª—É–≥—É, <a href="{% url 'users:login' %}">–≤–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a href="{% url 'users:register' %}">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>.</p>
        </div>
    {% endif %}

    <div class="service-actions">
        <a href="{% url 'services:list' %}" class="btn btn-secondary">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —É—Å–ª—É–≥</a>
    </div>
</div>
{% endblock %}
